# TempHist Cache Update Cron Jobs

# Run these commands to set up automatic cache updates

# Environment variables

# Set these in your .env file in the project directory:

# API_TOKEN=your_api_token_here

# VITE_API_BASE=https://api.temphist.com (or https://devapi.temphist.com for dev)

# OUTPUT_DIR=/path/to/your/webroot/data

# OPTION 1: Use Node.js scripts (recommended for Railway, Vercel, etc.)

# Update locations daily at midnight UTC

# 0 0 \* \* \* cd /path/to/your/project && node scripts/cron-fetch-locations.js >> /var/log/temphist-locations.log 2>&1

# Update daily temperature data hourly

# 0 \* \* \* \* cd /path/to/your/project && node scripts/cron-fetch-daily-data.js >> /var/log/temphist-temperature.log 2>&1

# OPTION 2: Use PHP scripts (works on traditional servers with limited Node.js support)

# Update locations daily at midnight UTC

# 0 0 \* \* \* cd /path/to/your/project && php scripts/cron-fetch-locations.php >> /var/log/temphist-locations.log 2>&1

# Update temperature data (daily, weekly, monthly, yearly) every day at 3 AM

# 0 3 \* \* \* cd /path/to/your/project && php scripts/cron-fetch-daily-data.php >> /var/log/temphist-temperature.log 2>&1

# OPTION 3: Run combined update script (runs both locations and temperature data)

# 0 _/6 _ \* \* cd /path/to/your/project && bash scripts/update-cache.sh >> /var/log/temphist-cache.log 2>&1

# Notes:

# - Replace /path/to/your/project with your actual project path (e.g., /home/user/www/temphist.com/repo)

# - Replace /path/to/your/webroot/data with your actual data directory path (e.g., /home/user/www/temphist.com/public_html/data)

# - Ensure .env file exists in project directory with API_TOKEN set

# - Log files will be created automatically

# - Check logs if scripts fail: tail -f /var/log/temphist-\*.log

# - The temperature data script requires API_TOKEN for authentication

# - PHP scripts use cURL instead of Node.js fetch/axios to avoid WebAssembly memory issues
