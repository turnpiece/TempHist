# TempHist Cache Update Cron Jobs

# RAILWAY SETUP (Recommended)

# Set these environment variables in your Railway dashboard:

# VITE_API_BASE=https://devapi.temphist.com (or https://api.temphist.com for production)

# API_TOKEN=your_api_token_here

# DEBUG_LOGGING=true (optional, for debugging)

# Railway Cron Jobs:

# Create two separate cron jobs in Railway dashboard:

# CRON JOB 1 (Locations):

# - Schedule: 0 0 \* \* \*

# - Custom Start Command: node scripts/cron-fetch-locations.js

# CRON JOB 2 (Daily Data):

# - Schedule: 0 \* \* \* \*

# - Custom Start Command: node scripts/cron-fetch-daily-data.js

# TRADITIONAL SERVER SETUP

# Set these in your .env file in the project directory:

# API_TOKEN=your_api_token_here

# VITE_API_BASE=https://api.temphist.com (or https://devapi.temphist.com for dev)

# OUTPUT_DIR=/path/to/your/webroot/data

# Update locations daily at midnight UTC

# 0 0 \* \* \* cd /path/to/your/project && node scripts/cron-fetch-locations.js >> /var/log/temphist-locations.log 2>&1

# Update daily temperature data hourly

# 0 \* \* \* \* cd /path/to/your/project && node scripts/cron-fetch-daily-data.js >> /var/log/temphist-temperature.log 2>&1

# OPTION 2: Use PHP scripts (works on traditional servers with limited Node.js support)

# Update locations daily at midnight UTC

# 0 0 \* \* \* cd /path/to/your/project && php scripts/cron-fetch-locations.php >> /var/log/temphist-locations.log 2>&1

# Update temperature data (daily, weekly, monthly, yearly) every day at 3 AM

# 0 3 \* \* \* cd /path/to/your/project && php scripts/cron-fetch-daily-data.php >> /var/log/temphist-temperature.log 2>&1

# Note: Combined update scripts have been removed in favor of separate cron schedules

# This allows for more flexible scheduling and better error isolation

# Notes:

# - Replace /path/to/your/project with your actual project path (e.g., /home/user/www/temphist.com/repo)

# - Replace /path/to/your/webroot/data with your actual data directory path (e.g., /home/user/www/temphist.com/public_html/data)

# - Ensure .env file exists in project directory with API_TOKEN set

# - Log files will be created automatically

# - Check logs if scripts fail: tail -f /var/log/temphist-\*.log

# - The temperature data script requires API_TOKEN for authentication

# - PHP scripts use cURL instead of Node.js fetch/axios to avoid WebAssembly memory issues
