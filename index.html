<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- INCLUDE:head-common -->
    <meta name="description" content="See how today's temperature compares to the same date over the past 50 years for your location." />
    <title>TempHist ‚Ä¢ temperature history</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.js" defer></script>
    <script
      src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.4.0/dist/chartjs-plugin-annotation.min.js"
      defer
    ></script>
    <link rel="dns-prefetch" href="%VITE_API_BASE%" />
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      <!-- INCLUDE:webapplication-json -->,
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "featureList": [
        "Historical temperature comparison",
        "Location-based weather data",
        "Interactive temperature charts",
        "50-year historical data",
        "Daily, weekly, monthly, and yearly views"
      ],
      "browserRequirements": "Requires JavaScript and location access",
      "screenshot": "https://temphist.com/assets/logo.png"
    }
    </script>
  </head>
  <body>
    <!-- INCLUDE:header -->

    <!-- Splash Screen -->
    <div id="splashScreen" class="splash-screen">
      <div class="splash-content">
        <div class="splash-header">
          <div class="splash-logo">
            <object data="/assets/logo.svg" type="image/svg+xml" title="TempHist">
              <img
                src="/assets/logo.png"
                alt="TempHist logo"
                width="80"
                height="80"
              />
            </object>
          </div>
          <h1 class="splash-title">TempHist</h1>
        </div>
        <h2 class="splash-subtitle">How does the temperature now compare to temperatures over the past half century?</h2>
        <div class="splash-intro">
          <p>Is today abnormally warm or abnormally cold? How does its temperature compare to that on the same date in previous years? Or the past week's temperature? Or that of the past month or the past year?</p>
        </div>
        
        <div class="splash-actions" aria-labelledby="location-picker-heading">
          <button id="useLocationBtn" class="btn btn-primary">
            üìç Use my location
          </button>
          <h2 id="location-picker-heading" class="location-picker__heading">
            Or choose one:
          </h2>

          <div class="location-carousel" id="location-carousel">
            <div class="location-carousel__track" id="location-carousel-track" role="listbox" aria-label="Popular locations">
              <!-- Cards get injected here -->
            </div>
        
            <div class="location-carousel__arrows">
              <button
                class="location-carousel__arrow location-carousel__arrow--left"
                type="button"
                aria-label="Scroll locations left"
                data-direction="left"
              >
                ‚óÄ
              </button>
        
              <button
                class="location-carousel__arrow location-carousel__arrow--right"
                type="button"
                aria-label="Scroll locations right"
                data-direction="right"
              >
                ‚ñ∂
              </button>
            </div>
          </div>
        </div>
        
        <!-- Loading state for location detection -->
        <div id="locationLoading" class="location-loading" style="display: none;">
          <div class="spinner"></div>
          <p class="loading-text">Detecting your location...</p>
        </div>
      </div>
    </div>

    <div id="appShell" class="hidden">
      <!-- INCLUDE:nav -->

      <main id="viewOutlet" role="main">
        <!-- Default view (Today) keeps your existing chart DOM -->
        <section id="todayView" data-view="today">
          <div class="container">
            <h2 id="dateText" class="date-heading"></h2>
            <div id="locationText" class="standard-text"></div>
            <div id="dataNotice" class="notice"></div>
            <div id="summaryText" class="standard-text data-field"></div>
            
            <div class="chart-container">
              <div id="loading" class="loading">
                <div class="spinner"></div>
                <p id="loadingText" class="loading-text">Loading temperature data‚Ä¶</p>
              </div>
              
              <div id="errorContainer" class="error-container" style="display: none;">
                <div class="error-content">
                  <div id="errorMessage" class="error-message"></div>
                  <button id="reloadButton" class="reload-button">Reload</button>
                </div>
              </div>
              
              <canvas id="tempChart" class="data-field"></canvas>
            </div>
            
            <div id="avgText" class="standard-text data-field"></div>
            <div id="trendText" class="standard-text data-field"></div>
            <div id="incompleteDataNotice" class="notice" style="display: none;"></div>
          </div>
        </section>

        <!-- Placeholders for other pages (rendered dynamically) -->
        <section id="weekView" data-view="week" hidden></section>
        <section id="monthView" data-view="month" hidden></section>
        <section id="yearView" data-view="year" hidden></section>
        
        <!-- Static pages integrated into SPA -->
        <section id="aboutView" data-view="about" hidden></section>
        <section id="privacyView" data-view="privacy" hidden></section>
      </main>
    </div>


    <script type="module" src="/src/main.ts" defer></script>
  </body>
</html>
